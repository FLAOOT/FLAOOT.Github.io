<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Universal Browser</title>
    <style>
        /* ... предыдущие стили ... */

        /* Новые элементы для медиа-поиска */
        .search-type {
            padding: 8px;
            border-radius: var(--border-radius);
            margin-left: 10px;
            background: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--secondary-color);
        }

        .media-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            padding: 20px;
        }

        .media-item {
            border-radius: var(--border-radius);
            overflow: hidden;
            background: var(--secondary-color);
            transition: transform 0.2s ease;
        }

        .media-item:hover {
            transform: translateY(-3px);
        }

        .media-thumbnail {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .media-info {
            padding: 10px;
        }

        .language-selector {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 8px;
            border-radius: var(--border-radius);
            background: var(--primary-color);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Добавляем селектор языка -->
    <select class="language-selector" id="languageSelector" onchange="changeLanguage(this.value)">
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
        <option value="ru">Русский</option>
    </select>

    <!-- Модифицированная панель управления -->
    <div class="controls">
        <!-- ... другие элементы ... -->
        <select class="search-type" id="searchType">
            <option value="web">Web</option>
            <option value="images">Images</option>
            <option value="video">Video</option>
            <option value="audio">Audio</option>
        </select>
    </div>

    <!-- Контейнер для результатов -->
    <div class="media-results" id="resultsContainer"></div>

    <script>
        // Локализации
        const translations = {
            en: {
                searchPlaceholder: "Search or enter address",
                web: "Web",
                images: "Images",
                video: "Video",
                audio: "Audio",
                // ... другие переводы
            },
            es: {
                searchPlaceholder: "Buscar o ingresar URL",
                web: "Web",
                images: "Imágenes",
                video: "Video",
                audio: "Audio",
                // ...
            },
            // ... другие языки
        };

        let currentLanguage = 'en';

        function changeLanguage(lang) {
            currentLanguage = lang;
            applyTranslations();
            localStorage.setItem('language', lang);
        }

        function applyTranslations() {
            document.getElementById('searchInput').placeholder = 
                translations[currentLanguage].searchPlaceholder;
            document.querySelectorAll('#searchType option').forEach((opt, index) => {
                opt.textContent = translations[currentLanguage][Object.keys(translations.en).filter(k => k !== 'searchPlaceholder')[index]];
            });
            // Обновить другие элементы интерфейса
        }

        // Медиа-поиск
        async function searchContent(query, type) {
            const API_KEYS = {
                GOOGLE: 'YOUR_GOOGLE_API_KEY',
                YOUTUBE: 'YOUR_YOUTUBE_API_KEY',
                PIXABAY: 'YOUR_PIXABAY_API_KEY'
            };

            let endpoint;
            switch(type) {
                case 'images':
                    endpoint = `https://pixabay.com/api/?key=${API_KEYS.PIXABAY}&q=${query}&image_type=photo`;
                    break;
                case 'video':
                    endpoint = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${query}&key=${API_KEYS.YOUTUBE}`;
                    break;
                case 'audio':
                    endpoint = `https://api.spotify.com/v1/search?q=${query}&type=track`;
                    break;
                default:
                    return performWebSearch(query);
            }

            try {
                const response = await fetch(endpoint);
                const data = await response.json();
                displayResults(data, type);
            } catch (error) {
                console.error('Search error:', error);
            }
        }

        function displayResults(data, type) {
            const container = document.getElementById('resultsContainer');
            container.innerHTML = '';

            switch(type) {
                case 'images':
                    data.hits.forEach(img => {
                        container.innerHTML += `
                            <div class="media-item">
                                <img src="${img.webformatURL}" class="media-thumbnail">
                                <div class="media-info">${img.tags}</div>
                            </div>
                        `;
                    });
                    break;
                case 'video':
                    data.items.forEach(video => {
                        container.innerHTML += `
                            <div class="media-item">
                                <iframe src="https://youtube.com/embed/${video.id.videoId}" 
                                    frameborder="0" allowfullscreen></iframe>
                            </div>
                        `;
                    });
                    break;
                case 'audio':
                    data.tracks.items.forEach(track => {
                        container.innerHTML += `
                            <div class="media-item">
                                <audio controls src="${track.preview_url}"></audio>
                                <div class="media-info">${track.name}</div>
                            </div>
                        `;
                    });
                    break;
            }
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('language') || 'en';
            changeLanguage(savedLang);
            document.getElementById('languageSelector').value = savedLang;
        });

        // Модифицированная функция поиска
        function performSearch() {
            const query = document.getElementById('searchInput').value;
            const type = document.getElementById('searchType').value;
            
            if(type === 'web') {
                navigateToUrl(query);
            } else {
                searchContent(query, type);
            }
        }
    </script>
</body>
</html>
