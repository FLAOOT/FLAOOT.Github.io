<!DOCTYPE html>
<html>
<head>
    <title>TelegramCraft</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: 'Roboto', sans-serif;
            background: #f3f4f5;
        }
        
        #menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            width: 320px;
            border-radius: 14px;
            box-shadow: 0 12px 24px rgba(0,0,0,0.1);
            padding: 24px;
            text-align: center;
            z-index: 1000;
        }
        
        .menu-title {
            color: #0088cc;
            font-size: 24px;
            margin-bottom: 24px;
            font-weight: 500;
        }
        
        .tg-button {
            display: block;
            width: 100%;
            padding: 14px;
            margin: 8px 0;
            background: #0088cc;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .tg-button:hover {
            background: #0077b3;
            transform: translateY(-1px);
        }
        
        #hud {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 16px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(4px);
            display: none;
            gap: 12px;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 500;
        }
        
        .hud-button {
            background: #0088cc;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        #crosshair {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(0,0,0,0.4);
            font-size: 24px;
            pointer-events: none;
            z-index: 100;
        }
        
        #inventory {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.95);
            padding: 12px;
            border-radius: 14px;
            display: none;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            backdrop-filter: blur(4px);
            z-index: 500;
        }
        
        .slot {
            width: 48px;
            height: 48px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            background: white;
            position: relative;
            transition: all 0.2s;
        }
        
        .slot.active {
            border-color: #0088cc;
            box-shadow: 0 0 0 2px #0088cc33;
        }
        
        .slot-count {
            position: absolute;
            bottom: 4px;
            right: 4px;
            background: #0088cc;
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div id="menu">
        <div class="menu-title">TelegramCraft</div>
        <button class="tg-button" onclick="startGame('creative')">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É (–ö—Ä–µ–∞—Ç–∏–≤)</button>
        <button class="tg-button" style="background: #20c997" onclick="startGame('survival')">üåø –†–µ–∂–∏–º –≤—ã–∂–∏–≤–∞–Ω–∏—è</button>
        <button class="tg-button" style="background: #adb5bd" onclick="loadWorld()">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∏—Ä</button>
    </div>

    <div id="hud">
        <button class="hud-button" onclick="toggleInventory()">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
        <div id="health">‚ù§Ô∏è 100%</div>
    </div>

    <div id="crosshair">+</div>
    <div id="inventory"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, raycaster;
        let keys = {};
        let currentBlockType = 'grass';
        let creativeMode = true;
        const BLOCK_SIZE = 1;
        const WORLD_SIZE = 50;
        let blocks = new Map();

        const blockMaterials = {
            grass: new THREE.MeshPhongMaterial({ color: 0x8BC34A }),
            dirt: new THREE.MeshPhongMaterial({ color: 0x795548 }),
            stone: new THREE.MeshPhongMaterial({ color: 0x9E9E9E }),
            'telegram-blue': new THREE.MeshPhongMaterial({ color: 0x0088cc }),
            'telegram-surface': new THREE.MeshPhongMaterial({ color: 0xffffff }),
            glass: new THREE.MeshStandardMaterial({
                color: 0x80DEEA,
                transparent: true,
                opacity: 0.8
            })
        };

        function startGame(mode) {
            creativeMode = mode === 'creative';
            document.getElementById('menu').style.display = 'none';
            document.getElementById('hud').style.display = 'flex';
            initGame();
        }

        function initGame() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Three.js
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf3f4f5);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 20);
            camera.lookAt(0, 0, 0);

            // –û—Å–≤–µ—â–µ–Ω–∏–µ
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(100, 100, 100);
            scene.add(directionalLight);

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏—Ä–∞
            createWorld();
            initInventory();
            initEventListeners();
            animate();
        }

        function createWorld() {
            for(let x = -WORLD_SIZE; x <= WORLD_SIZE; x++) {
                for(let z = -WORLD_SIZE; z <= WORLD_SIZE; z++) {
                    addBlock(x, 0, z, Math.random() > 0.9 ? 'telegram-blue' : 'telegram-surface');
                }
            }
        }

        function addBlock(x, y, z, type) {
            const key = `${x},${y},${z}`;
            if(blocks.has(key)) return;

            const geometry = new THREE.BoxGeometry(BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
            const cube = new THREE.Mesh(geometry, blockMaterials[type]);
            cube.position.set(x, y, z);
            scene.add(cube);
            blocks.set(key, cube);
        }

        function initInventory() {
            const inventory = document.getElementById('inventory');
            const blocksList = [
                {type: 'grass', count: 99},
                {type: 'dirt', count: 99},
                {type: 'stone', count: 99},
                {type: 'telegram-blue', count: 99},
                {type: 'telegram-surface', count: 99},
                {type: 'glass', count: 99}
            ];

            blocksList.forEach((block, index) => {
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.style.backgroundColor = blockMaterials[block.type].color.getStyle();
                slot.dataset.type = block.type;
                
                const count = document.createElement('div');
                count.className = 'slot-count';
                count.textContent = block.count;
                
                slot.appendChild(count);
                slot.onclick = () => selectSlot(slot, block.type);
                inventory.appendChild(slot);
            });
        }

        function selectSlot(slot, type) {
            document.querySelectorAll('.slot').forEach(s => s.classList.remove('active'));
            slot.classList.add('active');
            currentBlockType = type;
        }

        function initEventListeners() {
            document.addEventListener('click', () => document.body.requestPointerLock());
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('keydown', onKeyDown);
            document.addEventListener('keyup', onKeyUp);
            document.addEventListener('mousedown', onMouseDown);
            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        // –û—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (onMouseMove, onKeyDown –∏ —Ç.–¥.)
        // –î–æ–±–∞–≤—å—Ç–µ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

        // –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        function onMouseMove() {}
        function onKeyDown() {}
        function onKeyUp() {}
        function onMouseDown() {}
        function toggleInventory() {}
        function loadWorld() {}
    </script>
</body>
</html>
