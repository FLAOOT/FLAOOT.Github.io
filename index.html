<!DOCTYPE html>
<html>
<head>
    <title>TeleCraft</title>
    <script src="https://kaboomjs.com/lib/0.6.0/kaboom.js"></script>
    <style>
        body { margin: 0; background: #1a1a1a; }
        canvas { border: 2px solid #2ecc71; }
    </style>
</head>
<body>
<script>
kaboom({
    background: [0, 0, 0], // Чёрный фон как в Telegram
    width: 800,
    height: 600
});

// Стиль блоков (цвета как в Telegram)
const BLOCKS = {
    "grass": [34, 139, 34],    // Зелёный
    "dirt": [139, 69, 19],     // Коричневый
    "stone": [128, 128, 128]   // Серый
};

// Генерация мира (5x5x5)
const world = [];
for (let x = 0; x < 5; x++) {
    world[x] = [];
    for (let y = 0; y < 5; y++) {
        world[x][y] = [];
        for (let z = 0; z < 5; z++) {
            world[x][y][z] = "grass"; // Первый слой — трава
        }
    }
}

// Персонаж
const player = add([
    pos(400, 300),
    rect(20, 40),
    color(0, 191, 255), // Голубой цвет
    "player"
]);

// Управление (WASD + пробел)
onKeyPress("w", () => player.move(0, -10));
onKeyPress("s", () => player.move(0, 10));
onKeyPress("a", () => player.move(-10, 0));
onKeyPress("d", () => player.move(10, 0));
onKeyPress("space", () => {
    // Размещение блока (серый квадратик)
    add([
        pos(player.pos.x + 20, player.pos.y),
        rect(20, 20),
        color(128, 128, 128)
    ]);
});

// Интерфейс в стиле Telegram
add([
    text("TeleCraft v1.0", { size: 20 }),
    pos(20, 20),
    color(0, 255, 0)
]);

// Панель выбора блоков (справа)
const blockPanel = add([
    pos(650, 100),
    rect(100, 300),
    color(30, 30, 30)
]);

let selectedBlock = "grass";
Object.keys(BLOCKS).forEach((block, i) => {
    blockPanel.add([
        pos(10, 10 + i * 60),
        rect(80, 50),
        color(...BLOCKS[block]),
        area(),
        "block",
        { type: block }
    ]);

    blockPanel.onHover("block", (b) => b.color = [255, 255, 255]);
    blockPanel.onClick("block", (b) => selectedBlock = b.type);
});
</script>
</body>
</html>
